<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Suntep Solar | Koru Erikçe GES Projesi</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@500;600;700&family=Manrope:wght@500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="page">
    <nav class="navbar">
      <div class="nav-left">
        <img src="suntepsolarlogo.png" alt="Suntep Solar" class="logo">
      </div>
      <div class="nav-links">
        <a href="index.html" class="active">Ana Sayfa</a>
        <a href="urunler.html">Ürün Tanıtımları</a>
        <a href="yerlesim.html">Yerleşim Planı</a>
      </div>
    </nav>

    <div class="hero">
      <div class="hero-grid">
        <div>
          <h1>Koru Erikçe GES Projesi</h1>
          <p>6 villa için çatı GES kurulumu. Seçilen paketle tek villa ve toplam 6 villa maliyeti aynı ekranda hesaplanır.</p>
          <div class="cta-row">
            <a class="btn primary" href="#paketler">Paketleri İncele</a>
            <a class="btn" href="urunler.html">Ürün tanıtımları</a>
          </div>
          <div class="metrics">
            <div class="metric">
              <strong id="trees"></strong>
              <div>Yıllık kurtarılan ağaç</div>
            </div>
            <div class="metric">
              <strong id="co2"></strong>
              <div>Yıllık engellenen CO₂</div>
            </div>
            <div class="metric">
              <strong id="km"></strong>
              <div>Dizel araç km karşılığı</div>
            </div>
          </div>
        </div>
        <div class="hero-side">
          <div class="top">Proje</div>
          <div class="title">Koru Erikçe GES Projesi</div>
          <div class="value">9,9 <span class="unit">kWp</span></div>
          <div class="value" style="margin-top:6px;">11 <span class="unit">kWe</span></div>
        </div>
      </div>
    </div>

    <section id="paketler">
      <div class="section-head">
        <div>
          <div class="section-title">3 Paket Seçeneği</div>
          <div class="muted">Seçtiğiniz pakete göre villa başına ve 6 villa toplam tutarları otomatik hesaplanır.</div>
        </div>
      </div>
      <div class="cards">
        <div class="card" data-package="Ekonomi">
          <span class="pill">Ekonomik & yeterli</span>
          <h3>Temel kullanım</h3>
          <div class="price" id="price-ekonomi"></div>
          <div class="sub">18x 550W panel + 10 kW LiFePO4 akü</div>
          <ul class="features">
            <li><span class="dot"></span>18x Kalyon 550W bifacial panel</li>
            <li><span class="dot"></span>APX11 PRO akıllı inverter</li>
            <li><span class="dot"></span>2x 51,2V 100Ah LiFePO4</li>
          </ul>
          <div class="select-btn" onclick="selectPackage('Ekonomi')">Bu paketi seç</div>
        </div>
        <div class="card highlight" data-package="Performans">
          <span class="pill">Gece rahat kullanım</span>
          <h3>Daha uzun yedekleme</h3>
          <div class="price" id="price-performans"></div>
          <div class="sub">18x 550W panel + 15 kW LiFePO4 akü</div>
          <ul class="features">
            <li><span class="dot"></span>18x Kalyon 550W bifacial panel</li>
            <li><span class="dot"></span>APX11 PRO akıllı inverter</li>
            <li><span class="dot"></span>3x 51,2V 100Ah LiFePO4</li>
          </ul>
          <div class="select-btn" onclick="selectPackage('Performans')">Bu paketi seç</div>
        </div>
        <div class="card" data-package="Premium">
          <span class="pill">Yoğun/uzun kullanım</span>
          <h3>Maksimum depolama</h3>
          <div class="price" id="price-premium"></div>
          <div class="sub">18x 550W panel + 20 kW LiFePO4 akü</div>
          <ul class="features">
            <li><span class="dot"></span>18x Kalyon 550W bifacial panel</li>
            <li><span class="dot"></span>APX11 PRO akıllı inverter</li>
            <li><span class="dot"></span>4x 51,2V 100Ah LiFePO4</li>
          </ul>
          <div class="select-btn" onclick="selectPackage('Premium')">Bu paketi seç</div>
        </div>
      </div>

      <div class="material-panel" id="material-panel">
        <div class="material-header">
          <div>
            <div class="section-title" style="margin:0;">Seçilen paket: <span id="active-package">Performans</span></div>
            <div class="muted">Bu liste tek villa içindir. 6 villa için toplamlar otomatik hesaplanır.</div>
          </div>
          <div class="pill" id="est-power">6 kWp</div>
        </div>
        <table class="material-table" id="material-table">
          <thead>
            <tr>
              <th>No</th>
              <th>Ürün Açıklaması</th>
              <th>Adet (villa)</th>
              <th>Adet (6 villa)</th>
            </tr>
          </thead>
          <tbody id="material-list"></tbody>
        </table>
        <div class="totals">
          <div class="total-card">
            <div class="total-label">Villa başına</div>
            <div class="total-value" id="price-per-villa"></div>
          </div>
          <div class="total-card highlight">
            <div class="total-label">6 villa toplam</div>
            <div class="total-value" id="price-total"></div>
          </div>
        </div>
        <div class="muted" style="margin-top:8px;">Not: KDV hariç, anahtar teslim fiyattır.</div>
      </div>
    </section>

    <section>
    </section>
  </div>

  <script src="data.js"></script>
  <script>
    // Sürdürülebilirlik hesapları (6 villa, 108 panel @ 550W)
    const SUSTAINABILITY = (() => {
      const panelCount = 108;
      const panelWatt = 550;
      const totalKwp = (panelCount * panelWatt) / 1000; // 59.4 kWp
      const yieldPerKwp = 1400; // kWh/kWp/yıl varsayım (Türkiye)
      const annualKwh = totalKwp * yieldPerKwp; // ~83.160 kWh
      const co2Factor = 0.4; // kg CO2/kWh
      const treesPerKg = 21; // 1 ağaç ~21 kg CO2/yıl
      const dieselPerKm = 0.171; // kg CO2/km
      const co2Kg = annualKwh * co2Factor; // ~33.3 ton
      const trees = Math.round(co2Kg / treesPerKg);
      const km = Math.round(co2Kg / dieselPerKm);
      return { co2Kg, trees, km, annualKwh };
    })();

    function renderSustainability() {
      const fmt = (n, unit = "") => n.toLocaleString('tr-TR') + (unit ? " " + unit : "");
      document.getElementById('trees').textContent = fmt(SUSTAINABILITY.trees);
      document.getElementById('co2').textContent = fmt((SUSTAINABILITY.co2Kg / 1000).toFixed(1), "ton");
      document.getElementById('km').textContent = fmt(SUSTAINABILITY.km, "km");
    }

    function renderMaterials(pkg) {
      const wrap = document.getElementById('material-list');
      wrap.innerHTML = '';
      packages[pkg].materials.forEach((item, idx) => {
        const tr = document.createElement('tr');
        const qty = item.qty || 1;
        const qty6 = qty * VILLA_COUNT;
        tr.innerHTML = `
          <td class="num">${idx + 1}</td>
          <td>${item.name}</td>
          <td class="qty">${qty}</td>
          <td class="qty">${qty6}</td>
        `;
        wrap.appendChild(tr);
      });
      const pkgName = (packages[pkg] && packages[pkg].displayName) ? packages[pkg].displayName : pkg;
      document.getElementById('active-package').textContent = pkgName;
      document.getElementById('est-power').textContent = packages[pkg].power;
      document.getElementById('price-per-villa').textContent = formatPrice(packages[pkg].price);
      document.getElementById('price-total').textContent = formatPrice(packages[pkg].price * VILLA_COUNT);
      document.getElementById('price-' + pkg.toLowerCase()).textContent = formatPrice(packages[pkg].price);
    }

    function initPrices() {
      ['Ekonomi','Performans','Premium'].forEach(key => {
        const el = document.getElementById('price-' + key.toLowerCase());
        if (el) el.textContent = formatPrice(packages[key].price);
      });
    }

    function selectPackage(pkg) {
      renderMaterials(pkg);
      document.querySelectorAll('[data-package]').forEach(card => {
        card.style.outline = card.dataset.package === pkg ? '2px solid var(--accent)' : 'none';
      });
    }

    initPrices();
    selectPackage('Performans');
    renderSustainability();
  </script>
</body>
</html>
